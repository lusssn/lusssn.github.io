<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/favicon.ico">

    <title>
        
          é«˜å¾·åœ°å›¾å’ŒD3jsçš„ç»“åˆï¼ˆä¸Šï¼‰ - Lusssn
        
    </title>

    <link rel="canonical" href="https://lusssn.github.io/2019/05/experience/compass-summary-1/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/scss/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/scss/hux-blog.css">

    <!-- Custom Fonts -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- Hux Delete, sad but pending in China
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">lusssn</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    
                    
                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    
                    
                        
                        <li>
                            <a href="/archives/">Archives</a>
                        </li>
                        
                    
                    
                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/images/comm-header/experience.jpg')
    }
</style>
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                    </div>
                    <h1>é«˜å¾·åœ°å›¾å’ŒD3jsçš„ç»“åˆï¼ˆä¸Šï¼‰</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by Chris Lu on
                        2019-05-24
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="col-lg-11 col-lg-offset-1 col-md-11 col-md-offset-1 post-container">

                <p>æœ€è¿‘è´Ÿè´£å¼€å‘ä¸€ä¸ªåœ°å›¾é¡¹ç›®ï¼Œç”¨åˆ°äº†é«˜å¾·åœ°å›¾çš„SDKå’ŒD3jsï¼Œè®°å½•ä¸€ä¸‹æ¢ç´¢è¿‡ç¨‹å’Œå¿ƒå¾—ä½“ä¼šå§ã€‚<br><a id="more"></a></p>
<div class="toc">

<!-- toc -->
<ul>
<li><a href="#1-éº»ç‚¹å›¾å±‚-massmarks">1. éº»ç‚¹å›¾å±‚ MassMarks</a><ul>
<li><a href="#11-å›¾æ ‡å°ºå¯¸">1.1 å›¾æ ‡å°ºå¯¸</a></li>
<li><a href="#12-å›¾æ ‡å½¢çŠ¶">1.2 å›¾æ ‡å½¢çŠ¶</a></li>
<li><a href="#13-å›¾æ ‡é¢œè‰²">1.3 å›¾æ ‡é¢œè‰²</a></li>
</ul>
</li>
<li><a href="#2-è¡Œæ”¿åŒºå›¾å±‚-districtlayer">2. è¡Œæ”¿åŒºå›¾å±‚ DistrictLayer</a><ul>
<li><a href="#21-è¦†ç›–ç‰©">2.1 è¦†ç›–ç‰©</a></li>
<li><a href="#22-å›¾å±‚">2.2 å›¾å±‚</a></li>
<li><a href="#23-è¦†ç›–ç‰©ç»“åˆå›¾å±‚">2.3 è¦†ç›–ç‰©ç»“åˆå›¾å±‚</a></li>
</ul>
</li>
<li><a href="#3-è‡ªå»ºå›¾å±‚-customlayer">3. è‡ªå»ºå›¾å±‚ CustomLayer</a></li>
<li><a href="#4-æœç´¢æœåŠ¡-districtsearch">4. æœç´¢æœåŠ¡ DistrictSearch</a><ul>
<li><a href="#41-æœç´¢åŸå¸‚ä¿¡æ¯">4.1 æœç´¢åŸå¸‚ä¿¡æ¯</a></li>
<li><a href="#42-æœç´¢åŒºåŸŸè¾¹ç•Œçº¿">4.2 æœç´¢åŒºåŸŸè¾¹ç•Œçº¿</a></li>
</ul>
</li>
<li><a href="#5-æ‚ä¸ƒæ‚å…«çš„è®°å½•">5. æ‚ä¸ƒæ‚å…«çš„è®°å½•</a></li>
</ul>
<!-- tocstop -->
<p></p></div>å†…å®¹å¤ªå¤šæ‰€ä»¥åˆ†æˆé«˜å¾·åœ°å›¾ç¯‡ï¼ˆä¸Šï¼‰ã€D3jsç¯‡ï¼ˆä¸‹ï¼‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚æœ¬ç¯‡æ˜¯å¯¹é«˜å¾·åœ°å›¾ä½¿ç”¨çš„æ€»ç»“ã€‚<p></p>
<p>é«˜å¾·åœ°å›¾ç®—æ˜¯ä¸€æ¬¾å›½å†…æ¯”è¾ƒæˆç†Ÿçš„åœ°å›¾SDKäº†å§ã€‚<br>å®Œæˆè¿™æ¬¡é¡¹ç›®ç”¨åˆ°äº†ï¼š</p>
<ul>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/map" target="_blank" rel="noopener">åœ°å›¾ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€</a></li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/core" target="_blank" rel="noopener">åŸºç¡€ç±»</a>ï¼šPixelã€LngLatã€Bounds</li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/overlay" target="_blank" rel="noopener">è¦†ç›–ç‰©</a>ï¼šMarkerã€Polygonã€Rectangleã€OverlayGroup</li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/infowindow" target="_blank" rel="noopener">ä¿¡æ¯çª—ä½“</a>ï¼šInfoWindow</li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/layer" target="_blank" rel="noopener">å›¾å±‚</a>ï¼šMassMarksã€DistrictLayer</li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/self-own-layers" target="_blank" rel="noopener">è‡ªå»ºå›¾å±‚</a>ï¼šCustomLayer</li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/search" target="_blank" rel="noopener">æœç´¢æœåŠ¡</a>ï¼šAutocompleteã€DistrictSearch</li>
<li><a href="https://lbs.amap.com/api/javascript-api/reference/map-control" target="_blank" rel="noopener">åœ°å›¾æ§ä»¶</a>ï¼šScaleã€ToolBar</li>
</ul>
<p>é€šè¿‡çœ‹å®˜æ–¹æ–‡æ¡£å°±èƒ½ä¸Šæ‰‹çš„éƒ¨åˆ†å°±ä¸å•°å—¦äº†ã€‚è¿™é‡Œé¢å€¼å¾—ä¸€æçš„æ˜¯å›¾å±‚ã€è‡ªå»ºå›¾å±‚å’Œæœç´¢æœåŠ¡ã€‚</p>
<hr>
<h3><span id="1-éº»ç‚¹å›¾å±‚-massmarks">1. éº»ç‚¹å›¾å±‚ MassMarks</span></h3><blockquote>
<p>éœ€æ±‚è¯´æ˜<br>â˜ğŸ¼ å°†3000å¤šä¸ªæ•°æ®ï¼Œä»¥å›¾æ ‡çš„æ–¹å¼æ¸²æŸ“åˆ°åœ°å›¾ä¸Š<br>âœŒğŸ¼ å›¾æ ‡çš„é¢œè‰²å’Œå½¢çŠ¶å–å†³äºæ¥å£è¿”å›çš„å­—æ®µ<br>ğŸ‘ŒğŸ¼ å›¾æ ‡çš„å°ºå¯¸æ ¹æ®åœ°å›¾å½“å‰çš„ç¼©æ”¾çº§åˆ«åŠ¨æ€è°ƒæ•´</p>
</blockquote>
<p>å› ä¸ºé«˜å¾·åœ°å›¾å·²ç»æœ‰é«˜æ•ˆæ¸²æŸ“æµ·é‡ç‚¹æ•°æ®çš„APIï¼Œç›´æ¥ç”¨å°±æ˜¯äº†ã€‚<br>éœ€è¦è‡ªå·±ç¨å¾®å¤„ç†ä¸€ä¸‹çš„éƒ¨åˆ†å°±æ˜¯å›¾æ ‡çš„å½¢çŠ¶ã€é¢œè‰²å’Œå°ºå¯¸ã€‚</p>
<h4><span id="11-å›¾æ ‡å°ºå¯¸">1.1 å›¾æ ‡å°ºå¯¸</span></h4><p>è®¾ç½®å°ºå¯¸å¾ˆå®¹æ˜“ï¼Œæ ¹æ®ç¼©æ”¾çº§åˆ«è®¾ç½®ç›¸åº”çš„å›¾æ ‡å°ºå¯¸ï¼Œä¿®æ”¹é…ç½®é¡¹ä¸­çš„<code>style &gt; size</code>å³å¯ï¼ˆsizeæ”¯æŒæ•°ç»„æˆ–è€…<code>AMap.Size</code>ç±»ï¼‰ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MASS_STYLE_MAPPING = &#123;</span><br><span class="line">  <span class="number">9</span>: [<span class="number">4</span>, <span class="number">4</span>], <span class="comment">// 20km</span></span><br><span class="line">  <span class="number">10</span>: [<span class="number">6</span>, <span class="number">6</span>], <span class="comment">// 10km</span></span><br><span class="line">  <span class="number">11</span>: [<span class="number">10</span>, <span class="number">10</span>], <span class="comment">// 5km</span></span><br><span class="line">  <span class="number">12</span>: [<span class="number">10</span>, <span class="number">10</span>], <span class="comment">// 2km</span></span><br><span class="line">  <span class="number">13</span>: [<span class="number">20</span>, <span class="number">20</span>], <span class="comment">// 1km</span></span><br><span class="line">  <span class="number">14</span>: [<span class="number">20</span>, <span class="number">20</span>], <span class="comment">// 500m</span></span><br><span class="line">  <span class="number">15</span>: [<span class="number">22</span>, <span class="number">22</span>], <span class="comment">// 200m</span></span><br><span class="line">  <span class="number">16</span>: [<span class="number">22</span>, <span class="number">22</span>], <span class="comment">// 200m</span></span><br><span class="line">  <span class="number">17</span>: [<span class="number">26</span>, <span class="number">26</span>], <span class="comment">// 100m</span></span><br><span class="line">  <span class="number">18</span>: [<span class="number">26</span>, <span class="number">26</span>], <span class="comment">// 50m</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4><span id="12-å›¾æ ‡å½¢çŠ¶">1.2 å›¾æ ‡å½¢çŠ¶</span></h4><p>è®¾ç½®å›¾æ ‡å½¢çŠ¶å¯¹åº”é…ç½®<code>style &gt; url</code>ã€‚<br>æ–‡æ¡£ä¸­åªè¯´urlæ˜¯å›¾æ ‡åœ°å€ï¼Œstringç±»å‹ï¼Œçœ‹ç¤ºä¾‹ç”¨çš„æ˜¯ç½‘ç»œå›¾ç‰‡åœ°å€ã€‚<br>ç»è¿‡æµ‹è¯•æ‘¸ç´¢åå‘ç°ï¼Œ<strong>æ˜¯æ”¯æŒsvgå­—ç¬¦ä¸²çš„</strong>ï¼Œä¸ºäº†æ–¹ä¾¿é…ç½®å›¾æ ‡é¢œè‰²ï¼Œsvgå½“ç„¶æ˜¯æ¯”å›¾ç‰‡çµæ´»è®¸å¤šã€‚<br>æœ€åçš„å®ç°æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ¥å£è¿”å›çš„æ•°æ®åŒ…å«è¯¥ç‚¹çš„å›¾æ ‡åç§°</li>
<li>å‰ç«¯é™æ€ç»´æŠ¤åç§°-pathçš„æ˜ å°„</li>
<li>æ¸²æŸ“å›¾æ ‡çš„æ—¶å€™ï¼Œæ ¹æ®å›¾æ ‡åç§°æ‰¾åˆ°å¯¹åº”çš„pathï¼ŒåŠ¨æ€ç”Ÿæˆsvgå­—ç¬¦ä¸²</li>
</ol>
<p>è´´ä¸€ä¸‹å‰ç«¯åŠ¨æ€ç”Ÿæˆsvgå­—ç¬¦ä¸²çš„ä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SVG_MAPPING = &#123;</span><br><span class="line">  user: &#123;</span><br><span class="line">    viewBox: <span class="string">'0 0 20 20'</span>,</span><br><span class="line">    path: <span class="string">'M19 19h-18v-1c0-5 4-9 9-9s9 4 9 9v1zM3.1 17h13.9c-0.5-3.4-3.4-6-6.9-6s-6.5 2.6-7 6z M10 11c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zM10 3c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3z'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åŠ¨æ€ç”Ÿæˆsvgå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* @param iconName å›¾æ ‡åç§°</span></span><br><span class="line"><span class="comment">* @param color å›¾æ ‡é¢œè‰²</span></span><br><span class="line"><span class="comment">* @param bgType å¦‚éœ€æ·»åŠ èƒŒæ™¯è‰²ï¼Œä¼ å…¥rectæˆ–è€…circle</span></span><br><span class="line"><span class="comment">* @returns &#123;string&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> getSvg = <span class="function">(<span class="params">iconName, color, bgType</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> svg = SVG_MAPPING[iconName]</span><br><span class="line">  <span class="keyword">if</span> (!svg) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> bg = <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> (bgType === <span class="string">'rect'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> box = svg.viewBox.split(<span class="string">' '</span>)</span><br><span class="line">    bg = <span class="string">`%3Cpath fill='%23fff' d='M0 0h<span class="subst">$&#123;box[<span class="number">2</span>]&#125;</span>v<span class="subst">$&#123;box[<span class="number">3</span>]&#125;</span>H0z'/%3E`</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bgType === <span class="string">'circle'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> r = svg.viewBox.split(<span class="string">' '</span>)[<span class="number">2</span>] / <span class="number">2</span></span><br><span class="line">    bg = <span class="string">`%3Ccircle fill='%23fff' cx='<span class="subst">$&#123;r&#125;</span>' cy='<span class="subst">$&#123;r&#125;</span>' r='<span class="subst">$&#123;r&#125;</span>'/%3E`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='<span class="subst">$&#123;svg.viewBox&#125;</span>'%3E<span class="subst">$&#123;bg&#125;</span>%3Cpath fill='<span class="subst">$&#123;color&#125;</span>' d='<span class="subst">$&#123;svg.path&#125;</span>'/%3E%3C/svg%3E`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4><span id="13-å›¾æ ‡é¢œè‰²">1.3 å›¾æ ‡é¢œè‰²</span></h4><p>å›¾æ ‡æ˜¯ä»€ä¹ˆé¢œè‰²æ˜¯æ¥å£è¿”å›çš„ï¼Œåœ¨åŠ¨æ€ç”Ÿæˆsvgå­—ç¬¦ä¸²çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼ å…¥é¢œè‰²å­—æ®µå°±å¯ä»¥äº†ã€‚</p>
<hr>
<h3><span id="2-è¡Œæ”¿åŒºå›¾å±‚-districtlayer">2. è¡Œæ”¿åŒºå›¾å±‚ DistrictLayer</span></h3><blockquote>
<p>éœ€æ±‚è¯´æ˜<br>â˜ğŸ¼ é¡µé¢å¯ä»¥è¿›è¡ŒåŸå¸‚åˆ‡æ¢<br>âœŒğŸ¼ åœ°å›¾ä¸Šæ˜¾ç¤ºå½“å‰åŸå¸‚åœ°å›¾ï¼Œå¹¶ç»˜åˆ¶è¡Œæ”¿åŒºåŸŸè¾¹ç•Œçº¿</p>
</blockquote>
<p><img src="/2019/05/experience/compass-summary-1/shanghai.png" alt=""></p>
<h4><span id="21-è¦†ç›–ç‰©">2.1 è¦†ç›–ç‰©</span></h4><p>æœ€å¼€å§‹çš„æ–¹æ¡ˆï¼Œæ˜¯å…ˆç”¨DistrictSearchæ ¹æ®åŸå¸‚åç§°è·å¾—åŸå¸‚çš„adcodeï¼Œå†ç”¨åŸå¸‚adcodeå’Œlevelå»æŸ¥è¯¢ä¸‹é¢çš„è¡Œæ”¿åŒºè¾¹ç•Œï¼Œæœ€åç»˜åˆ¶æˆ<code>AMap.Polygon</code>ç±»ã€‚<br><strong>ä¼˜ç‚¹ï¼š</strong>å¯ä»¥è‡ªå®šä¹‰è¾¹ç•Œçº¿çš„ç²—ç»†ç¨‹åº¦ã€‚<br><strong>ç¼ºç‚¹ï¼š</strong>è€—è´¹æ—¶é—´ï¼Œå¤§æ¦‚è¦600msã€‚</p>
<h4><span id="22-å›¾å±‚">2.2 å›¾å±‚</span></h4><p>åæ¥å‘ç°é«˜å¾·2018-09-12å°±å‘å¸ƒäº†ç®€æ˜“è¡Œæ”¿åŒºå›¾å±‚æ’ä»¶ã€‚<br>è¿™ä¸ªæ’ä»¶ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œé‡ç‚¹æ˜¯ç‰¹åˆ«å¿«ï¼Œå¤§æ¦‚200mså®Œæˆç»˜åˆ¶ã€‚<br>ä½†æ˜¯å®ƒçœŸçš„å¤ªç®€å•ï¼Œåªæ”¯æŒåˆ°å¤§éƒ¨åˆ†å¸‚çº§çš„è¡Œæ”¿åŒºè¾¹ç•Œï¼Œå¤ªä»“ã€è¾›é›†éƒ½æ²¡æœ‰ï¼Œé‡åº†ç»˜åˆ¶å‡ºæ¥ä¸åŒ…æ‹¬éƒŠå¿ã€‚<br><strong>ä¼˜ç‚¹ï¼š</strong>ç»˜åˆ¶é«˜æ•ˆï¼Œè°ƒç”¨ç®€å•ã€‚<br><strong>ç¼ºç‚¹ï¼š</strong>è¦†ç›–çš„åœ°åŒºä¸å…¨ï¼Œä¸èƒ½è°ƒæ•´è¾¹ç•Œçº¿çš„ç²—ç»†ç¨‹åº¦ã€‚</p>
<h4><span id="23-è¦†ç›–ç‰©ç»“åˆå›¾å±‚">2.3 è¦†ç›–ç‰©ç»“åˆå›¾å±‚</span></h4><p>ç»¼åˆä¸Šé¢ä¸¤ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼Œæœ€åé‡‡ç”¨äºŒåˆä¸€æ–¹å¼ï¼Œè´´ä¸€ä¸ªç®€å•çš„ä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> AMap.Map(<span class="string">'amap'</span>)</span><br><span class="line"><span class="keyword">const</span> districtLayer = <span class="keyword">new</span> AMap.DistrictLayer.Province(&#123;</span><br><span class="line">  styles: &#123;</span><br><span class="line">    fill: <span class="string">'rgba(204,243,255,0.3)'</span>,</span><br><span class="line">    <span class="string">'county-stroke'</span>: <span class="string">'#CC66CC'</span>, <span class="comment">// ä¸­å›½åŒºå¿è¾¹ç•Œ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> districtSearcher = <span class="keyword">new</span> AMap.DistrictSearch()</span><br><span class="line"><span class="keyword">const</span> drawDistrictBounds = <span class="keyword">async</span> cityName =&gt; &#123;</span><br><span class="line">  <span class="comment">// ç”¨DistrictSearchæ ¹æ®åŸå¸‚åç§°è·å¾—åŸå¸‚çš„adcodeã€levelã€‚å®ç°è§æœ¬æ–‡4.1</span></span><br><span class="line">  <span class="keyword">const</span> city = <span class="keyword">await</span> getAMapCity(districtSearcher, cityName)</span><br><span class="line">  <span class="keyword">if</span> (city.level === <span class="string">'district'</span>) &#123;</span><br><span class="line">    drawDistrictBoundsByCustom(city.adcode, city.level)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¤„ç†é‡åº†éƒŠå¿</span></span><br><span class="line">  <span class="keyword">if</span> (city.adcode === <span class="string">'500100'</span>) &#123;</span><br><span class="line">    districtLayer.setDistricts([city.adcode, <span class="number">500200</span>])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    districtLayer.setDistricts([city.adcode])</span><br><span class="line">  &#125;</span><br><span class="line">  map.add(districtLayer)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> drawDistrictBoundsByCustom = <span class="keyword">async</span> (keyword, level = <span class="string">'city'</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ç”¨DistrictSearchæŸ¥è¯¢è¡Œæ”¿åŒºè¾¹ç•Œï¼Œç»˜åˆ¶Polygonã€‚å®ç°è§æœ¬æ–‡4.2</span></span><br><span class="line">  <span class="keyword">const</span> group = <span class="keyword">await</span> districtSearch(districtSearcher, &#123; keyword, level &#125;)</span><br><span class="line">  <span class="keyword">const</span> districtGroup = <span class="keyword">new</span> AMap.OverlayGroup(group)</span><br><span class="line">  <span class="comment">// å¯¹æ­¤è¦†ç›–ç‰©ç¾¤ç»„è®¾ç½®åŒä¸€å±æ€§</span></span><br><span class="line">  districtGroup.setOptions(&#123;</span><br><span class="line">    strokeWeight: <span class="number">1</span>,</span><br><span class="line">    fillOpacity: <span class="number">0.3</span>,</span><br><span class="line">    fillColor: <span class="string">'#CCF3FF'</span>,</span><br><span class="line">    strokeColor: <span class="string">'#CC66CC'</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  districtGroup.setMap(map)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h3><span id="3-è‡ªå»ºå›¾å±‚-customlayer">3. è‡ªå»ºå›¾å±‚ CustomLayer</span></h3><blockquote>
<p>éœ€æ±‚è¯´æ˜<br>è‡ªå®šä¹‰å›¾å±‚å†…å®¹<br>å›¾å±‚çŠ¶æ€å¯ä»¥åŒæ­¥åœ°å›¾çš„ç¼©æ”¾ã€å¹³ç§»ã€å°ºå¯¸å˜åŒ–çŠ¶æ€</p>
</blockquote>
<p>é«˜å¾·çš„è‡ªå®šä¹‰å›¾å±‚åŠŸèƒ½å¿…é¡»ç»™ç‚¹ä¸ªèµï¼Œè¿™ä¸ªåŠŸèƒ½ç»™åœ°å›¾äº§å“å¸¦æ¥æ›´å¤šçš„å¯èƒ½ã€‚é™¤äº†CustomLayerï¼Œè¿˜æœ‰TileLayerã€ImageLayerã€CanvasLayerã€VideoLayerã€‚ä¸æ˜¯å¾ˆæ˜ç™½ç»†åŒ–è¿™äº›å›¾å±‚çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œæ„Ÿè§‰æœ‰ä¸ªä¸‡èƒ½çš„CustomLayerå°±å¤Ÿäº†ã€‚</p>
<p>ä½¿ç”¨èµ·æ¥ä¹Ÿç®€å•ï¼š</p>
<ol>
<li>åŠ è½½CustomLayeræ’ä»¶</li>
<li>åˆ›å»ºCustomLayerå®ä¾‹ï¼Œåˆå§‹åŒ–renderæ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šåœ¨åœ°å›¾çŠ¶æ€å˜åŒ–æ—¶è¢«è°ƒç”¨</li>
<li>æ·»åŠ è‡ªå®šä¹‰å›¾å±‚åˆ°åœ°å›¾å®ä¾‹</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrenderæ–¹æ³•ä¼šæœ‰è¢«é¢‘ç¹è°ƒç”¨å¯èƒ½ï¼Œæœ€å¥½æ˜¯åšä¸€ä¸ª<strong>é˜²æŠ–åˆ¤æ–­</strong>ã€‚</p>
<hr>
<h3><span id="4-æœç´¢æœåŠ¡-districtsearch">4. æœç´¢æœåŠ¡ DistrictSearch</span></h3><p>å‘ç‚¹æœ‰äºŒ<br>âš ï¸ é«˜å¾·çš„è¡Œæ”¿çº§åˆ«åˆ’åˆ†è·Ÿæˆ‘ä»¬çš„è®¤çŸ¥ä¸ä¸€è‡´ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œé‡åº†å¸‚æˆ‘è®¤ä¸ºæ˜¯å¸‚çº§åˆ«ï¼Œä½†æ˜¯é«˜å¾·æ˜¯çœçº§ï¼›å¤ªä»“å¸‚æˆ‘è®¤ä¸ºæ˜¯å¸‚çº§åˆ«ï¼Œå®é™…åˆæ˜¯åŒºçº§ã€‚<br>âš ï¸ ä¸ªåˆ«çœå¸‚çš„è¡Œæ”¿åŒºåˆ’åˆ†å¾ˆç‰¹æ®Šï¼Œç›®å‰å‘ç°çš„æ˜¯é‡åº†å’Œè‹å·ï¼Œé‡åº†ç”±é‡åº†éƒŠå¿å’Œä¸»åŸåŒºç»„æˆï¼Œè‹å·ç”±è‹å·å·¥ä¸šå›­åŒºå’Œä¸»åŸåŒºç»„æˆã€‚</p>
<p>å°è£…äº†ä¸¤ä¸ªæœç´¢çš„æ–¹æ³•ï¼Œè‡ªæˆ‘æ„Ÿè§‰å¹¶ä¸æ˜¯å¾ˆæ»¡æ„ï¼Œå†æ…¢æ…¢ä¼˜åŒ–å§ã€‚<br>ä¸‹é¢çš„ä»£ç å¼•å…¥äº†<a href="https://ramdajs.com/docs/" target="_blank" rel="noopener">ramdaå·¥å…·åº“</a>ï¼Œç¼©å†™ä¸ºRã€‚</p>
<h4><span id="41-æœç´¢åŸå¸‚ä¿¡æ¯">4.1 æœç´¢åŸå¸‚ä¿¡æ¯</span></h4><ul>
<li>searcherï¼šDistrictSearchå®ä¾‹</li>
<li>keywordï¼šå…³é”®å­—ï¼ˆåŸå¸‚åç§°æˆ–adcodeï¼‰</li>
<li>levelï¼šæœç´¢çº§åˆ«</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getAMapCity = <span class="function">(<span class="params">searcher, keyword, level = <span class="string">'city'</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// base-ä¸è¿”å›è¡Œæ”¿åŒºè¾¹ç•Œåæ ‡ç‚¹</span></span><br><span class="line">    searcher.setExtensions(<span class="string">'base'</span>)</span><br><span class="line">    <span class="comment">// 0-ä¸è¿”å›ä¸‹çº§è¡Œæ”¿åŒº</span></span><br><span class="line">    searcher.setSubdistrict(<span class="number">0</span>)</span><br><span class="line">    searcher.search(keyword, (status, result) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (status !== <span class="string">'complete'</span>) &#123;</span><br><span class="line">        reject(result)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> district = R.find(R.propEq(<span class="string">'level'</span>, level))(result.districtList) || result.districtList[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">if</span> (!district) &#123;</span><br><span class="line">        reject(result)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      resolve(district)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="42-æœç´¢åŒºåŸŸè¾¹ç•Œçº¿">4.2 æœç´¢åŒºåŸŸè¾¹ç•Œçº¿</span></h4><ul>
<li>searcherï¼šDistrictSearchå®ä¾‹</li>
<li>othersï¼šæ›´å¤šé…ç½®<ul>
<li>keywordï¼šå…³é”®å­—ï¼ˆåŸå¸‚åç§°æˆ–adcodeï¼‰</li>
<li>levelï¼šæœç´¢çº§åˆ«</li>
<li>subDistrictï¼šæ˜¯å¦è·å–ä¸‹ä¸€çº§çš„è¡Œæ”¿åŒºè¾¹ç•Œ 1-è¿”å›ï¼Œ0-ä¸è¿”å›</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> districtSearch = <span class="function">(<span class="params">searcher, others = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; keyword, level, subDistrict = <span class="number">1</span> &#125; = others</span><br><span class="line">    <span class="comment">// all-è¿”å›è¡Œæ”¿åŒºè¾¹ç•Œåæ ‡ç‚¹</span></span><br><span class="line">    searcher.setExtensions(<span class="string">'all'</span>)</span><br><span class="line">    <span class="comment">// 1-è¿”å›ä¸‹ä¸€çº§è¡Œæ”¿åŒº</span></span><br><span class="line">    searcher.setSubdistrict(subDistrict)</span><br><span class="line">    searcher.search(keyword, <span class="keyword">async</span> (status, result) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (status !== <span class="string">'complete'</span>) &#123;</span><br><span class="line">        reject(result)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> district = R.find(R.propEq(<span class="string">'level'</span>, level))(result.districtList)</span><br><span class="line">      <span class="keyword">if</span> (!district) &#123;</span><br><span class="line">        reject(result)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> &#123; boundaries, districtList = [] &#125; = district</span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯åŸå¸‚çº§åˆ«ï¼Œè¿›ä¸€æ­¥è·å–ä¸‹ä¸€çº§è¡Œæ”¿åŒº</span></span><br><span class="line">      <span class="keyword">if</span> (level === <span class="string">'city'</span> &amp;&amp; !R.isEmpty(districtList)) &#123;</span><br><span class="line">        <span class="keyword">const</span> next = districtList.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> districtSearch(searcher, &#123; <span class="attr">keyword</span>: item.adcode, <span class="attr">level</span>: item.level &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">const</span> group = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(next)</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯é‡åº†å¸‚ï¼Œå¤„ç†é‡åº†éƒŠå¿</span></span><br><span class="line">        <span class="keyword">if</span> (district.adcode === <span class="string">'500100'</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; <span class="attr">districtList</span>: districtJiao &#125; = R.find(R.propEq(<span class="string">'adcode'</span>, <span class="string">'500200'</span>))(result.districtList)</span><br><span class="line">          <span class="keyword">const</span> nextJiao = districtJiao.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> districtSearch(searcher, &#123; <span class="attr">keyword</span>: item.adcode, <span class="attr">level</span>: item.level &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="built_in">Promise</span>.all(nextJiao).then(<span class="function"><span class="params">jiaoGroup</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(group.concat([jiaoGroup]))</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯è‹å·å¸‚ï¼Œå¤„ç†è‹å·å·¥ä¸šå›­åŒº</span></span><br><span class="line">        <span class="keyword">if</span> (district.adcode === <span class="string">'320500'</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> districtPark = R.find(R.propEq(<span class="string">'adcode'</span>, <span class="string">'320571'</span>))(result.districtList)</span><br><span class="line">          <span class="keyword">const</span> industrialPark = districtPark.boundaries.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> AMap.Polygon(&#123; <span class="attr">path</span>: item &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">          resolve(group.concat([industrialPark]))</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        resolve(group)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// ç”Ÿæˆè¡Œæ”¿åŒºåˆ’polygon</span></span><br><span class="line">      resolve(boundaries.map(<span class="function"><span class="params">item</span> =&gt;</span> (<span class="keyword">new</span> AMap.Polygon(&#123; <span class="attr">path</span>: item &#125;))))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3><span id="5-æ‚ä¸ƒæ‚å…«çš„è®°å½•">5. æ‚ä¸ƒæ‚å…«çš„è®°å½•</span></h3><p>æœ‰äº›çç¢çš„ã€æˆ‘è§‰å¾—æŒºå‘çš„ç‚¹ï¼Œä¹Ÿé¡ºä¾¿è®°å½•åœ¨è¿™é‡Œã€‚</p>
<ul>
<li><p>ğŸ™„<strong>OverlayGroupçš„ä½œç”¨å¾ˆé¸¡è‚‹</strong><br>æˆ‘è¿˜ä»¥ä¸º<code>AMap.OverlayGroup</code>æ˜¯æ‰¹é‡ç»˜åˆ¶è¦†ç›–ç‰©çš„å¯¹è±¡ï¼Œå®é™…æµ‹è¯•ä¸‹æ¥å¹¶ä¸æ˜¯ï¼Œæˆ‘ä¼°è®¡å®ƒçš„åº•å±‚åªæ˜¯ä»£æ›¿å¼€å‘è€…åšäº†ä¸€ä¸ªå¾ªç¯ï¼Œå› ä¸ºå¯¹æ€§èƒ½æ²¡æœ‰ä¸€ç‚¹å„¿å¸®åŠ©ã€‚</p>
</li>
<li><p>ğŸ™„<strong>è·å–Boundsä¸­å¿ƒç‚¹å­˜åœ¨é—®é¢˜</strong><br>åˆ›å»ºä¸€ä¸ª<code>AMap.Rectangle</code>æ—¶éœ€è¦ä¼ å…¥çŸ©å½¢çš„boundså‚æ•°ï¼Œæ–‡æ¡£æ˜¯è¯´ç”¨ä¸œåŒ—-è¥¿å—è§’åæ ‡ã€‚äº²æµ‹ä¸‹æ¥ï¼Œè¿™æ ·ä¼šåœ¨åˆ›å»ºå®ŒçŸ©å½¢åï¼Œè·å–boundsä¸­å¿ƒç‚¹æ—¶ï¼Œç»åº¦ä¸ºè´Ÿæ•°ã€‚<br>è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨è¥¿åŒ—-ä¸œå—è§’åæ ‡ã€‚</p>
</li>
<li><p>ğŸ˜¡<strong>moveendäº‹ä»¶è§¦å‘çš„æ—¶æœºå’Œæ–‡æ¡£ä¸ç¬¦</strong><br>ç»™åœ°å›¾ç»‘å®šäº‹ä»¶çš„æ—¶å€™ï¼Œæ„å¤–å‘ç°ToolBaræ§åˆ¶ã€é”®ç›˜æ§åˆ¶åœ°å›¾ç¼©æ”¾æ—¶ï¼Œmoveendäº‹ä»¶æ²¡æœ‰è¢«è§¦å‘ï¼Œä½†æ˜¯é¼ æ ‡æ»šè½®æ§åˆ¶ç¼©æ”¾æ—¶å°±ä¼šè§¦å‘moveendäº‹ä»¶ï¼ŒçœŸçš„æ˜¯å¥‡æ€ªã€‚<br>è§£å†³åŠæ³•æ˜¯å…¨å±€æ·»åŠ ä¸€ä¸ªæ ‡è®°å€¼isZoomEndï¼Œç»‘å®šzoomendäº‹ä»¶ï¼Œè§¦å‘æ—¶ç½®isZoomEndä¸ºtrueï¼Œåœ¨moveendå›è°ƒä¸­é˜»æ­¢é‡å¤å¤„ç†ï¼Œå¹¶æ”¹isZoomEndä¸ºfalseã€‚</p>
</li>
<li><p>ğŸ˜¤<strong>clearMapæ¥å£æ•ˆç‡å¥‡ä½</strong><br>æ¸…é™¤åœ°å›¾ä¸Šæ‰€æœ‰è¦†ç›–ç‰©çš„API <code>clearMap</code>ï¼Œèƒ½æŠŠäººé€¼ç–¯ã€‚æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ä¸‹åœ°å›¾ä¸Šç»˜åˆ¶äº†æˆåƒä¸Šä¸‡çš„è¦†ç›–ç‰©ï¼Œåˆ‡æ¢åŸå¸‚æ—¶è¿™äº›è¦†ç›–ç‰©éœ€è¦ä¸€æ¬¡æ€§æ¸…é™¤æ‰ï¼Œç»˜åˆ¶æ–°çš„ã€‚8000ä¸ªè¦†ç›–ç‰©è¦è€—è´¹åå‡ ç§’ï¼å®åœ¨æ¼ç«ï¼Œä¸”æ— èƒ½ä¸ºåŠ›ã€‚</p>
</li>
</ul>
<hr>
<p>é«˜å¾·åªæ”¯æŒäº†ç‚¹æ•°æ®çš„æµ·é‡ç»˜åˆ¶ï¼Œéœ€è¦æµ·é‡ç»˜åˆ¶è¦†ç›–ç‰©çš„æ—¶å€™ï¼Œæ€§èƒ½å°±ä¸‹æ»‘å¾—éš¾ä»¥è®©äººæ¥å—äº†ï¼Œä¸å¾—ä¸å¦å¯»å‡ºè·¯ã€‚<br>å€ŸåŠ©CustomLayerï¼Œå°±å¯ä»¥è‡ªå®šä¹‰è¦†ç›–ç‰©çš„ç»˜åˆ¶æ–¹å¼ï¼Œcanvasä¹Ÿå¥½ï¼Œsvgä¹Ÿå¥½ã€‚</p>
<p>ä¸‹é¢ä¸€ç¯‡æ–‡å°±ç»§ç»­æ€»ç»“é«˜å¾·åœ°å›¾é…åˆD3jsçš„å¼€å‘ç»éªŒã€‚</p>


                <hr>

                

                <ul class="pager">
                    
                    
                        <li class="next">
                            <a href="/2019/03/essay/thinking-in-2019-03/" data-toggle="tooltip" data-placement="top" title="æ˜¥å¤©æ€ä¹ˆè¿˜ä¸æ¥">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                

                
                <!-- disqus è¯„è®ºæ¡† start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus è¯„è®ºæ¡† end -->
                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>

        </div>
    </div>
</article>




<!-- disqus å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "lusssn";
    var disqus_identifier = "https://lusssn.github.io/2019/05/experience/compass-summary-1/";
    var disqus_url = "https://lusssn.github.io/2019/05/experience/compass-summary-1/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus å…¬å…±JSä»£ç  end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/lusssn">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://weibo.com/lusssn">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank" href="https://github.com/lusssn">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                <li>
                    <a href="mailto:lusssn@126.com">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
                
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; lusssn 2019
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script type="text/javascript">
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("https://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="https://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->

<!-- canvas-fog.js -->
<script type="text/javascript">
  // only load tagcloud.js in tag.html
  if($('#fogCanvas').length){
    async("https://lusssn.github.io/js/canvas-fog.js", function(){
      // IE9+çƒŸé›¾æ•ˆæœèµ°èµ·
      if ([].map) {
        FogCanvas(document.querySelector('#fogCanvas'), {
          count: 30,
          velocity: 1,
          url: 'https://lusssn.github.io/images/lusssn-fog.png'
        });
      }
    })
  }
</script>

<!-- jquery.tagcloud.js -->
<script type="text/javascript">
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length){
        async("https://lusssn.github.io/js/jquery.tagcloud.js", function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#b18db1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!-- fastClick.js -->
<script type="text/javascript">
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>

<!-- Google Analytics -->


<!-- Baidu Tongji -->


<!-- Side Catalog -->




<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
